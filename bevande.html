<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/output.css">
    <title>Bevande</title>
</head>
<body>
    <!-- HEADER -->
    <header class="w-full h-[420px] bg-zinc-900 bg-home bg-cover bg-center">
        <div class="w-full h-full flex flex-col justify-center items-center">
            <img 
                src="./assets/ristorante.png"
                alt="Logo Ristorante"
                class="w-32 h-32 rounded-full shadow-lg hover:scale-110 duration-200"
            /> 
            <h1 class="text-4xl mt-4 mb-2 font-bold text-white">
                 Bevande
            </h1>
            </div>
        </div>
    </header>
    <!-- FIM DO HEADER -->

    <h2 class="text-2xl md:text-3xl font-bold text-center mt-9 mb-6">
       Menu
    </h2>

    <!-- TOTAL DO CARRINHO -->
    <div class="text-center mb-6">
        <p class="text-lg font-bold">Total do Carrinho: <span id="total-price" class="text-orange-500">€0,00</span></p>
        <p class="text-lg font-bold">Quantidade total: <span id="total-quantity" class="text-orange-500">0</span></p>
        <button id="finalize-order" class="bg-orange-500 text-white px-4 py-2 rounded mt-4">Confirmar Pedido</button>
        <button id="clear-cart" class="bg-orange-500 text-white px-4 py-2 rounded mt-4 ml-4">Limpar Carrinho</button>
    </div>

    <!-- INICIO DOS ITENS DE BEVANDE -->
    <div class="px-4">
        <main class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Item 1 -->
            <div class="flex flex-col items-center">
                <img src="./assets/vinho.png" alt="Vinho" class="w-28 h-28 rounded-md hover:scale-110 hover:-rotate-2 duration-300" />
                <p class="font-bold">Vino Rosso</p>
                <p class="text-sm text-gray-600">Vino Rosso Secco</p>
                <p class="text-orange-500 font-semibold mt-2">€10,00</p>
                <div class="flex items-center mt-2">
                    <button class="bg-orange-500 text-white px-2 py-1 rounded" onclick="adjustQuantity(10.00, 1, 1)">+</button>
                    <span class="mx-2"></span> <!-- Espaçamento entre os botões -->
                    <button class="bg-orange-500 text-white px-2 py-1 rounded" onclick="adjustQuantity(10.00, -1, 1)">-</button>
                </div>
            </div>
            <!-- Item 2 -->
            <div class="flex flex-col items-center">
                <img src="./assets/água com gás.png" alt="Água" class="w-28 h-28 rounded-md hover:scale-110 hover:-rotate-2 duration-300" />
                <p class="font-bold">Acqua Frizzante</p>
                <p class="text-sm text-gray-600">Água mineral com gás</p>
                <p class="text-orange-500 font-semibold mt-2">€3,00</p>
                <div class="flex items-center mt-2">
                    <button class="bg-orange-500 text-white px-2 py-1 rounded" onclick="adjustQuantity(3.00, 1, 2)">+</button>
                    <span class="mx-2"></span> <!-- Espaçamento entre os botões -->
                    <button class="bg-orange-500 text-white px-2 py-1 rounded" onclick="adjustQuantity(3.00, -1, 2)">-</button>
                </div>
            </div>
        </main>
    </div>
    <!-- FIM DOS ITENS DE BEVANDE -->

    <script>
        let total = 0;
        let totalQuantity = 0;
        const cartItems = [];

        // Função para ajustar a quantidade no carrinho
        function adjustQuantity(price, change, dishId) {
            const existingItem = cartItems.find(item => item.id === dishId);
            
            // Não permite reduzir abaixo de 0
            if (change < 0 && (!existingItem || existingItem.quantity === 0)) {
                return;
            }

            totalQuantity += change;
            totalQuantity = Math.max(0, totalQuantity); // Garante que não fique negativo

            total += change > 0 ? price : -price;
            total = Math.max(0, total); // Garante que o total não fique negativo

            // Atualiza os itens do carrinho
            if (change > 0) {
                // Adiciona ou atualiza o prato no carrinho
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cartItems.push({ id: dishId, price: price, quantity: 1 });
                }
            } else {
                // Reduz a quantidade ou remove o prato do carrinho
                if (existingItem && existingItem.quantity > 0) {
                    existingItem.quantity--;
                    if (existingItem.quantity === 0) {
                        const itemIndex = cartItems.indexOf(existingItem);
                        cartItems.splice(itemIndex, 1); // Remove se a quantidade for 0
                    }
                }
            }

            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById("total-price").innerText = `€${total.toFixed(2)}`;
            document.getElementById("total-quantity").innerText = totalQuantity;
        }

        // Limpar carrinho
        document.getElementById("clear-cart").addEventListener("click", () => {
            total = 0;
            totalQuantity = 0;
            cartItems.length = 0; // Esvazia o array do carrinho
            updateDisplay();
        });

        // Finalizar pedido
        document.getElementById("finalize-order").addEventListener("click", () => {
            if (totalQuantity > 0) {
                alert("Pedido confirmado! Total: €" + total.toFixed(2));
            } else {
                alert("O carrinho está vazio.");
            }
        });
    </script>
</body>
</html>
